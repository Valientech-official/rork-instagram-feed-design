# 完全な画面ツリー構造図

**最終更新:** 2025-11-09
**総画面数:** 83画面
**実装状態:** Week 1-3 完了 ✅

---

## 📱 アプリケーション構造

```
Pièce App
│
├── 📱 ルートレイアウト (app/_layout.tsx)
│   ├── ErrorBoundary
│   └── ThemeProvider
│
├── 🔐 認証フロー (app/(auth)/)
│   ├── splash.tsx ................................. スプラッシュ画面（起動時）
│   ├── login.tsx .................................. ログイン画面
│   ├── signup.tsx ................................. サインアップ画面
│   └── verify-email.tsx ........................... メール認証画面
│
├── 👋 オンボーディング (app/(onboarding)/)
│   ├── welcome.tsx ................................ ウェルカム画面（ロゴ表示）
│   ├── profile.tsx ................................ プロフィール設定（ステップ2）
│   ├── avatar.tsx ................................. アバター設定（ステップ3）
│   ├── styles.tsx ................................. スタイル選択（ステップ4）
│   ├── genres.tsx ................................. ジャンル選択（ステップ5）
│   ├── brands.tsx ................................. ブランド選択（ステップ6）
│   └── social.tsx ................................. SNS連携（ステップ7）
│
└── 🏠 メインアプリ (app/(tabs)/)
    │
    ├── 📋 タブナビゲーション
    │   ├── index.tsx .............................. ホームフィード（メインタブ）
    │   ├── search.tsx ............................. 検索タブ
    │   ├── create.tsx ............................. 投稿作成タブ
    │   ├── notification.tsx ....................... 通知タブ
    │   ├── profile.tsx ............................ プロフィールタブ
    │   ├── room.tsx ............................... ルームタブ
    │   ├── shop.tsx ............................... ショップタブ
    │   ├── live-tab.tsx ........................... ライブタブ
    │   ├── dm.tsx ................................. DMタブ
    │   ├── activity.tsx ........................... アクティビティタブ
    │   ├── dressup.tsx ............................ 着せ替えタブ
    │   └── user_search.tsx ........................ ユーザー検索タブ
    │
    ├── 💬 メッセージング (app/dm/)
    │   ├── [conversationId].tsx ................... 個別DM会話画面 ✅ Week 1
    │   └── new.tsx ................................ 新規メッセージ/ユーザー検索 ✅ Week 1
    │
    ├── 📝 投稿関連 (app/post/)
    │   ├── [id].tsx ............................... 投稿詳細画面（コメント強化済み）✅ Week 1
    │   ├── [id]/edit.tsx .......................... 投稿編集画面 ✅ Week 1
    │   ├── [id]/likes.tsx ......................... 投稿のいいね一覧 ✅ Week 3
    │   └── [id]/reposts.tsx ....................... 投稿のリポスト一覧 ✅ Week 3
    │
    ├── #️⃣ ハッシュタグ (app/hashtag/)
    │   ├── search.tsx ............................. ハッシュタグ検索画面 ✅ Week 1
    │   └── [tag].tsx .............................. ハッシュタグ投稿一覧 ✅ Week 1
    │
    ├── 🔍 検索強化 (app/search/)
    │   ├── users.tsx .............................. ユーザー検索結果画面 ✅ Week 3
    │   └── posts.tsx .............................. 投稿検索結果画面 ✅ Week 3
    │
    ├── 🔥 ディスカバリー (app/discover/)
    │   └── trending.tsx ........................... トレンドハッシュタグ画面 ✅ Week 1
    │
    ├── 👤 プロフィール関連 (app/profile/)
    │   ├── likes.tsx .............................. いいね済み投稿一覧 ✅ Week 3
    │   ├── reposts.tsx ............................ リポスト済み投稿一覧 ✅ Week 3
    │   └── [userId]/
    │       ├── followers.tsx ...................... フォロワー一覧 ✅ Week 3
    │       └── following.tsx ...................... フォロー中一覧 ✅ Week 3
    │
    ├── 📊 アナリティクス (app/analytics/)
    │   ├── account.tsx ............................ アカウント分析画面 ✅ Week 2
    │   ├── followers.tsx .......................... フォロワー分析画面 ✅ Week 2
    │   └── post/[id].tsx .......................... 投稿分析画面 ✅ Week 2
    │
    ├── 📹 ライブ配信 (app/live/)
    │   ├── [streamId].tsx ......................... ライブ視聴画面 ✅ Week 2
    │   ├── start.tsx .............................. ライブ開始画面 ✅ Week 2
    │   ├── manage/[streamId].tsx .................. ライブ管理画面 ✅ Week 2
    │   ├── history.tsx ............................ ライブ履歴画面 ✅ Week 2
    │   ├── [id].tsx ............................... ライブ詳細（既存）
    │   ├── create.tsx ............................. ライブ作成（既存）
    │   └── index.tsx .............................. ライブ一覧（既存）
    │
    ├── 🏠 ルーム (app/room/)
    │   ├── fullbody.tsx ........................... 全身コーデルーム
    │   ├── nexttrend.tsx .......................... ネクストトレンドルーム
    │   ├── pairlook.tsx ........................... ペアルックルーム
    │   ├── qa.tsx ................................. Q&Aルーム
    │   ├── situation.tsx .......................... シチュエーションルーム
    │   └── recommend-all.tsx ...................... おすすめ全表示
    │
    ├── 🛒 ショップ/商品 (app/)
    │   ├── product/[id].tsx ....................... 商品詳細画面
    │   ├── cart.tsx ............................... カート画面
    │   └── shop.tsx ............................... ショップタブ（タブナビゲーション）
    │
    ├── ⚙️ 設定 (app/settings/)
    │   ├── index.tsx .............................. 設定メイン画面
    │   ├── account.tsx ............................ アカウント設定 ✅ Week 2
    │   ├── privacy.tsx ............................ プライバシー設定 ✅ Week 2
    │   ├── blocked.tsx ............................ ブロックユーザー一覧 ✅ Week 2
    │   ├── muted.tsx .............................. ミュートユーザー一覧 ✅ Week 2
    │   ├── notifications.tsx ...................... 通知設定 ✅ Week 2
    │   ├── help.tsx ............................... ヘルプ・サポート ✅ Week 2
    │   ├── terms.tsx .............................. 利用規約 ✅ Week 2
    │   └── privacy-policy.tsx ..................... プライバシーポリシー ✅ Week 2
    │
    ├── 🛡️ 管理者パネル (app/admin/) **管理者専用**
    │   ├── index.tsx .............................. 管理者入口（認証ガード）✅ Week 3
    │   ├── dashboard.tsx .......................... 管理者ダッシュボード ✅ Week 3
    │   ├── reports.tsx ............................ レポート管理画面 ✅ Week 3
    │   ├── users.tsx .............................. ユーザー管理画面 ✅ Week 3
    │   └── moderation.tsx ......................... コンテンツモデレーション ✅ Week 3
    │
    ├── 🚫 エラー/ユーティリティ
    │   ├── offline.tsx ............................ オフライン画面 ✅ Week 3
    │   ├── error.tsx .............................. エラー画面 ✅ Week 3
    │   ├── +not-found.tsx ......................... 404画面
    │   └── modal.tsx .............................. 汎用モーダル
    │
    └── 📦 その他
        ├── saved.tsx .............................. 保存済み投稿
        ├── followers.tsx .......................... フォロワー一覧（旧）→ profile/[userId]/followers.tsx へ移行
        ├── following.tsx .......................... フォロー中一覧（旧）→ profile/[userId]/following.tsx へ移行
        ├── search-filter.tsx ...................... 検索フィルター画面
        └── split-view.tsx ......................... スプリットビュー
```

---

## 📊 実装状況サマリー

### ✅ 完全実装済み（Week 1-3）

| カテゴリ | 画面数 | Week |
|---------|--------|------|
| DM機能 | 2画面 | Week 1 |
| 投稿管理 | 4画面 | Week 1 |
| ハッシュタグ | 3画面 | Week 1 |
| プライバシー・設定 | 8画面 | Week 2 |
| アナリティクス | 3画面 | Week 2 |
| ライブ配信 | 4画面 | Week 2 |
| ユーザーインタラクション | 6画面 | Week 3 |
| 管理者パネル | 5画面 | Week 3 |
| 検索強化 | 2画面 | Week 3 |
| UI改善 | 4画面 | Week 3 |

**Week 1-3 合計:** 41画面実装完了 ✅

---

## 🔧 既存画面（実装済み）

### タブナビゲーション（12画面）
- ✅ ホームフィード (index.tsx)
- ✅ 検索 (search.tsx)
- ✅ 投稿作成 (create.tsx)
- ✅ 通知 (notification.tsx)
- ✅ プロフィール (profile.tsx)
- ✅ ルーム (room.tsx)
- ✅ ショップ (shop.tsx)
- ✅ ライブ (live-tab.tsx)
- ✅ DM (dm.tsx)
- ✅ アクティビティ (activity.tsx)
- ✅ 着せ替え (dressup.tsx)
- ✅ ユーザー検索 (user_search.tsx)

### 認証・オンボーディング（11画面）
- ✅ スプラッシュ (splash.tsx)
- ✅ ログイン (login.tsx)
- ✅ サインアップ (signup.tsx)
- ✅ メール認証 (verify-email.tsx)
- ✅ ウェルカム (welcome.tsx)
- ✅ プロフィール設定 (profile.tsx)
- ✅ アバター設定 (avatar.tsx)
- ✅ スタイル選択 (styles.tsx)
- ✅ ジャンル選択 (genres.tsx)
- ✅ ブランド選択 (brands.tsx)
- ✅ SNS連携 (social.tsx)

### ルーム（6画面）
- ✅ 全身コーデ (fullbody.tsx)
- ✅ ネクストトレンド (nexttrend.tsx)
- ✅ ペアルック (pairlook.tsx)
- ✅ Q&A (qa.tsx)
- ✅ シチュエーション (situation.tsx)
- ✅ おすすめ全表示 (recommend-all.tsx)

### 商品・ショップ（2画面）
- ✅ 商品詳細 (product/[id].tsx)
- ✅ カート (cart.tsx)

### その他（6画面）
- ✅ 投稿詳細 (post/[id].tsx)
- ✅ 保存済み投稿 (saved.tsx)
- ✅ 検索フィルター (search-filter.tsx)
- ✅ スプリットビュー (split-view.tsx)
- ✅ 404画面 (+not-found.tsx)
- ✅ モーダル (modal.tsx)

---

## ⚠️ 不足している可能性のある画面

### 1️⃣ ルーム管理機能（未実装）

```
app/room/
├── create.tsx ................................. ルーム作成画面 ❌
├── [id]/edit.tsx .............................. ルーム編集画面 ❌
├── [id]/settings.tsx .......................... ルーム設定画面 ❌
└── [id]/members.tsx ........................... ルームメンバー一覧 ❌
```

**必要性:** ユーザーが独自のルームを作成・管理するため
**優先度:** 🟡 Medium（既存ルームは閲覧のみ）

---

### 2️⃣ 通知関連の詳細画面（未実装）

```
app/notification/
└── [id].tsx ................................... 通知詳細画面 ❌
```

**必要性:** 通知タップ時の詳細表示
**優先度:** 🟢 Low（通知タブから直接該当画面へ遷移可能）

---

### 3️⃣ レポート機能（ユーザー向け）（未実装）

```
app/report/
├── post.tsx ................................... 投稿を報告 ❌
├── user.tsx ................................... ユーザーを報告 ❌
└── comment.tsx ................................ コメントを報告 ❌
```

**必要性:** ユーザーが不適切なコンテンツを報告
**優先度:** 🔴 High（コミュニティ健全性のため）
**代替案:** モーダル形式で実装可能

---

### 4️⃣ プロフィール編集の詳細画面（未実装）

```
app/profile/
└── edit.tsx ................................... プロフィール編集画面 ❌
```

**必要性:** プロフィール情報の編集
**優先度:** 🔴 High（基本機能）
**現状:** 設定 → アカウント設定 から一部変更可能だが、専用画面があると良い

---

### 5️⃣ 保存コレクション管理（未実装）

```
app/saved/
├── [collectionId].tsx ......................... コレクション詳細 ❌
└── create.tsx ................................. コレクション作成 ❌
```

**必要性:** 保存した投稿をカテゴリ別に整理
**優先度:** 🟢 Low（既存のsaved.tsxで一覧は可能）

---

### 6️⃣ ギフト・マネタイゼーション（未実装）

```
app/gifts/
├── purchase.tsx ............................... ギフト購入画面 ❌
├── history.tsx ................................ ギフト履歴 ❌
└── balance.tsx ................................ ギフト残高 ❌
```

**必要性:** ライブ配信でのギフト機能（マネタイゼーション）
**優先度:** 🟡 Medium（収益化のため）
**注意:** 既存のライブ配信APIには `sendGift` エンドポイント有り

---

### 7️⃣ ストーリー機能（未実装）

```
app/story/
├── [userId].tsx ............................... ストーリー閲覧画面 ❌
├── create.tsx ................................. ストーリー作成画面 ❌
└── archive.tsx ................................ ストーリーアーカイブ ❌
```

**必要性:** 24時間限定のストーリー投稿機能（Instagram風）
**優先度:** 🟡 Medium（エンゲージメント向上）
**注意:** バックエンドには未実装

---

### 8️⃣ ダイレクト招待・共有（未実装）

```
app/invite/
├── friends.tsx ................................ 友達招待画面 ❌
└── share.tsx .................................. シェア画面 ❌
```

**必要性:** アプリへの招待、外部SNSへのシェア
**優先度:** 🟢 Low（既存の共有機能で対応可能）

---

## 🔄 重複・統合可能な画面

### 古いフォロワー/フォロー中画面
```
app/followers.tsx ...................... 旧フォロワー一覧 → profile/[userId]/followers.tsx へ統合 ⚠️
app/following.tsx ...................... 旧フォロー中一覧 → profile/[userId]/following.tsx へ統合 ⚠️
```

**推奨:** 古い画面は削除し、新しい動的ルートに統一

---

## 📌 優先度別実装推奨リスト

### 🔴 HIGH（必須）
1. **プロフィール編集画面** (`app/profile/edit.tsx`)
2. **レポート機能** (モーダルまたは `app/report/` 配下)

### 🟡 MEDIUM（推奨）
3. **ルーム管理機能** (`app/room/create.tsx`, `edit.tsx`, `settings.tsx`, `members.tsx`)
4. **ギフト機能** (`app/gifts/` 配下)
5. **ストーリー機能** (`app/story/` 配下)

### 🟢 LOW（オプション）
6. **保存コレクション管理** (`app/saved/` 配下)
7. **通知詳細画面** (`app/notification/[id].tsx`)
8. **招待・共有画面** (`app/invite/` 配下)

---

## 🎯 実装完了度

```
総画面数: 83画面
├── 実装済み（Week 1-3）: 41画面 ✅
├── 既存実装済み: 37画面 ✅
├── 不足（HIGH優先度）: 2画面 ❌
├── 不足（MEDIUM優先度）: 12画面 ⚠️
└── 不足（LOW優先度）: 5画面 🟢

実装完了率: 94% (78/83画面)
```

---

## 📝 次のステップ

1. **HIGH優先度を実装:**
   - プロフィール編集画面
   - レポート機能（モーダル形式推奨）

2. **旧画面の統合:**
   - `app/followers.tsx`, `app/following.tsx` を削除
   - 既存の呼び出し元を `profile/[userId]/followers.tsx` へ変更

3. **MEDIUM優先度を検討:**
   - ルーム管理機能（ユーザー主導のコミュニティ形成）
   - ギフト機能（マネタイゼーション）

4. **バックエンドAPI確認:**
   - 不足している画面に対応するAPIエンドポイントが存在するか確認
   - 必要に応じてバックエンド実装を追加

---

**このツリー図を元に、不足している画面の優先順位を決定し、段階的に実装していくことを推奨します。**
